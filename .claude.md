# Playwright 練習用プロジェクト

Playwright を使ったE2Eテストの学習・練習用アプリケーションです。

## プロジェクト概要

| 項目 | 内容 |
|------|------|
| 目的 | Playwright によるE2Eテスト学習 |
| フレームワーク | React 18 + TypeScript |
| ビルドツール | Vite |
| テスト | Playwright |
| CI/CD | GitHub Actions |
| リポジトリ | https://github.com/Y-Kanekoo/playwright-practice-app |

---

## ディレクトリ構造

```
playwright-practice-app/
├── src/                    # ソースコード
│   ├── components/         # UIコンポーネント
│   │   ├── LoginForm.tsx
│   │   ├── TodoList.tsx
│   │   ├── TodoItem.tsx
│   │   └── WeatherWidget.tsx
│   ├── pages/              # ページコンポーネント
│   │   ├── LoginPage.tsx
│   │   └── TodoPage.tsx
│   ├── contexts/           # Reactコンテキスト
│   │   └── AuthContext.tsx
│   ├── services/           # APIサービス
│   │   └── api.ts
│   ├── types/              # 型定義
│   │   ├── index.ts
│   │   └── api.ts
│   ├── App.tsx
│   └── main.tsx
│
├── tests/                  # Playwrightテスト
│   ├── e2e/               # E2Eテストファイル
│   │   ├── login.spec.ts
│   │   ├── todo.spec.ts
│   │   ├── api-mock.spec.ts
│   │   ├── visual.spec.ts
│   │   ├── isolation.spec.ts
│   │   ├── performance.spec.ts
│   │   └── accessibility.spec.ts
│   ├── fixtures/          # テストフィクスチャ
│   │   └── index.ts
│   ├── pages/             # Page Object Model
│   │   ├── LoginPage.ts
│   │   └── TodoPage.ts
│   ├── reporters/         # カスタムレポーター
│   │   ├── json-summary.ts
│   │   └── markdown.ts
│   └── notifications/     # 通知システム
│       ├── index.ts
│       └── providers/
│           ├── slack.ts
│           ├── discord.ts
│           ├── teams.ts
│           └── webhook.ts
│
├── .github/workflows/      # GitHub Actions
│   └── playwright.yml
├── playwright.config.ts
└── package.json
```

---

## 学習ロードマップ

### Phase 1: 基礎（完了）
- [x] プロジェクトセットアップ
- [x] 基本的なテストの書き方
- [x] ロケーター戦略の理解
  - CSS セレクター
  - テキストベース
  - ロール（role）ベース ← 推奨

### Phase 2: 実践（完了）
- [x] Page Object Model パターン
- [x] テストフィクスチャの作成
- [x] 複数ブラウザでのテスト
- [x] モバイルビューポートテスト

### Phase 3: 応用（完了）
- [x] API モック・インターセプション
- [x] CI/CD連携（GitHub Actions）
- [x] ビジュアルリグレッションテスト
- [x] 並列実行とテスト分離

### Phase 4: 発展（完了）
- [x] カスタムレポート作成
- [x] パフォーマンステスト
- [x] アクセシビリティテスト
- [x] テスト結果通知（Slack/Discord/Teams/Webhook）

---

## 実装済み機能

| 機能 | 学習ポイント | 状態 |
|------|-------------|------|
| ログインフォーム | 入力、バリデーション、送信 | ✅ |
| TODOリスト | CRUD操作、リスト操作、フィルター | ✅ |
| 天気ウィジェット | APIモック用コンポーネント | ✅ |
| ページ遷移 | ナビゲーション、認証ガード | ✅ |
| API連携 | モック、インターセプション | ✅ |

## テスト数

| カテゴリ | テスト数 |
|---------|---------|
| ログイン | 8 |
| TODO | 9 |
| APIモック | 7 |
| ビジュアル | 12 |
| テスト分離 | 16 |
| パフォーマンス | 9 |
| アクセシビリティ | 13 |
| **合計** | **74** |

---

## コマンド一覧

### 開発
```bash
npm run dev              # 開発サーバー起動 (http://localhost:5173)
npm run build            # 本番ビルド
npm run preview          # ビルド結果プレビュー
```

### テスト
```bash
npx playwright test                    # 全テスト実行
npx playwright test --ui               # UIモードで実行
npx playwright test --project=chromium # Chromeのみ
npx playwright test --headed           # ブラウザ表示あり
npx playwright test --debug            # デバッグモード
npx playwright test tests/e2e/home.spec.ts  # 特定ファイル
```

### ユーティリティ
```bash
npx playwright codegen http://localhost:5173  # テスト自動生成
npx playwright show-report                     # レポート表示
npx playwright install                         # ブラウザインストール
```

---

## Playwright 設定メモ

### ロケーター優先順位
1. `getByRole()` - アクセシビリティ属性（最推奨）
2. `getByLabel()` - ラベルテキスト
3. `getByPlaceholder()` - プレースホルダー
4. `getByText()` - テキスト内容
5. `getByTestId()` - data-testid属性
6. `locator()` - CSSセレクター（最終手段）

### 良いテストの書き方
```typescript
// Good: アクセシビリティロケーター
await page.getByRole('button', { name: '送信' }).click();

// Avoid: CSSセレクター
await page.locator('.submit-btn').click();
```

---

## このプロジェクト固有の規約

### テストファイル命名
- `*.spec.ts` - テストファイル
- `*Page.ts` - Page Objectファイル

### テスト名
- 日本語で記述OK
- 「〜できる」「〜が表示される」形式を推奨

```typescript
test('ログインボタンをクリックするとホーム画面に遷移する', async ({ page }) => {
  // ...
});
```
